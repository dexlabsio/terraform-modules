resources:
- name: my-service-account
  type: iam.v1.serviceAccount
  properties:
    accountId: "my-service-account"
    displayName: "My Service Account"

- name: bigquery-user-role-binding
  type: gcp-types/cloudresourcemanager-v1:virtual.projects.iamMemberBinding
  properties:
    resource: "projects/${projectId}"
    role: "roles/bigquery.user"
    member: "serviceAccount:${projectId}@my-service-account.iam.gserviceaccount.com"

- name: bigquery-data-editor-role-binding
  type: gcp-types/cloudresourcemanager-v1:virtual.projects.iamMemberBinding
  properties:
    resource: "projects/${projectId}"
    role: "roles/bigquery.dataEditor"
    member: "serviceAccount:${projectId}@my-service-account.iam.gserviceaccount.com"

- name: custom-storage-role
  type: gcp-types/iam-v1:projects.roles
  properties:
    parent: "projects/${projectId}"
    roleId: "CustomStorageRole"
    role:
      title: "Custom Storage Role"
      description: "Custom role for specific storage permissions"
      stage: "GA"
      includedPermissions:
      - storage.managedFolders.delete
      - storage.managedFolders.get
      - storage.managedFolders.list
      - storage.multipartUploads.abort
      - storage.multipartUploads.create
      - storage.multipartUploads.list
      - storage.multipartUploads.listParts
      - storage.objects.create
      - storage.objects.delete
      - storage.objects.get
      - storage.objects.list
      - storage.objects.restore
      - storage.objects.update

- name: custom-storage-role-binding
  type: gcp-types/cloudresourcemanager-v1:virtual.projects.iamMemberBinding
  properties:
    resource: "projects/${projectId}"
    role: "projects/${projectId}/roles/CustomStorageRole"
    member: "serviceAccount:${projectId}@my-service-account.iam.gserviceaccount.com"
